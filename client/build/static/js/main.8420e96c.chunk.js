(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,a){e.exports=a(79)},48:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(23),c=a.n(r),l=(a(48),a(13)),i=a(14),s=a(16),m=a(15),u=a(17),d=a(2),p=a(12),b=a(19),h=a(18),g=a(1),f=a(7),E=a.n(f),v=Object(g.l)({user:{},get headers(){return this.user.headers},get user_id(){return this.user.user_id},get isLogin(){try{if(this.user.user_id)return!0}catch(e){}return!1},get pathToTodos(){return this.isLogin?"/todos/".concat(this.user.user_id):"/"}});function j(){return o.a.createElement("div",{className:"container h-100"},o.a.createElement("div",{className:"row text-center align-items-center h-100"},o.a.createElement("div",{className:"col-md-12 text-left"},o.a.createElement("div",{className:"col-md-12 text-center"},o.a.createElement("h1",null,"Todo app"),o.a.createElement("h2",null,"To start use this application you need to login/registrate!"),o.a.createElement(p.b,{to:"/login"},o.a.createElement("button",{className:"btn btn-success"},"Login")),o.a.createElement(p.b,{to:"/register"},o.a.createElement("button",{className:"btn btn-warning",style:{marginLeft:5}},"Registrate"))))),v.isLogin?o.a.createElement(b.a,{to:v.pathToTodos}):"")}var O,w,y,N,k,C,_,L,x,D,A,T,z,S,R,U,W,M,P,B,J=a(5),I=a(4),$=(a(26),a(11)),q=a.n($),F=Object(g.l)({email:"",password:"",isLoginSuccess:!1}),G=Object(h.a)((w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o))),Object(J.a)(a,"handleLogin",y,Object(I.a)(a)),Object(J.a)(a,"handleEdit",N,Object(I.a)(a)),a.getUser=function(){try{E.a.get("user")&&(v.user=Object.assign({},E.a.get("user")))}catch(e){console.log(e)}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"text-center"},"Login page"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Email"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"email",onChange:this.handleEdit,name:"email",className:"form-control",placeholder:"Email",value:F.email}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Password"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"password",onChange:this.handleEdit,name:"password",className:"form-control",placeholder:"Password",value:F.password}))),o.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),e.handleLogin()},className:"btn btn-primary"},"Login"),F.isLoginSuccess?o.a.createElement(b.a,{to:v.pathToTodos}):""))}}]),t}(n.Component),y=Object(d.a)(w.prototype,"handleLogin",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return q.a.post("api/login",{email:F.email,password:F.password}).then(function(t){if(401===t.data.code)return alert("incorrect data!");E.a.set("user",{user_id:t.data.user_id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t.data.access_token}}),e.getUser(),F.isLoginSuccess=!0})}}}),N=Object(d.a)(w.prototype,"handleEdit",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){F[e.target.name]=e.target.value}}}),O=w))||O,H=Object(g.l)({name:"",email:"",password:"",password_confirmation:"",isRegistrateSuccess:!1}),K=Object(h.a)((C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o))),Object(J.a)(a,"handleRegister",_,Object(I.a)(a)),Object(J.a)(a,"handleEdit",L,Object(I.a)(a)),a.getUser=function(){try{E.a.get("user")&&(v.user=Object.assign({},E.a.get("user")))}catch(e){console.log(e)}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"text-center"},"Register page"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Name"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"Name",name:"name",onChange:this.handleEdit,value:H.name,className:"form-control",placeholder:"Name"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Email"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"email",className:"form-control",onChange:this.handleEdit,value:H.email,name:"email",placeholder:"Email"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Password"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"password",name:"password",onChange:this.handleEdit,className:"form-control",value:H.password,placeholder:"Password"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Confirm password"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"password",name:"password_confirmation",onChange:this.handleEdit,className:"form-control",value:H.password_confirmation,placeholder:"Password"}))),o.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault(),e.handleRegister()}},"Register"),H.isRegistrateSuccess?o.a.createElement(b.a,{to:v.pathToTodos}):""))}}]),t}(n.Component),_=Object(d.a)(C.prototype,"handleRegister",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return q.a.post("api/register",{name:H.name,email:H.email,password:H.password,password_confirmation:H.password_confirmation}).then(function(t){return 200===t.data.code?(E.a.set("user",{user_id:t.data.user_id,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:t.data.access_token}}),e.getUser(),H.isRegistrateSuccess=!0,console.log("registration success!")):(console.log("invalid data"),alert("registration data invalid"))})}}}),L=Object(d.a)(C.prototype,"handleEdit",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){H[e.target.name]=e.target.value}}}),k=C))||k,Q=a(42),V=Object(g.l)({id:"",task:"",todos:[],editDisabled:!1}),X=Object(h.a)((D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o))),Object(J.a)(a,"onSubmit",A,Object(I.a)(a)),Object(J.a)(a,"onChange",T,Object(I.a)(a)),Object(J.a)(a,"onCompleted",z,Object(I.a)(a)),Object(J.a)(a,"onUpdate",S,Object(I.a)(a)),Object(J.a)(a,"onEdit",R,Object(I.a)(a)),Object(J.a)(a,"onLogout",U,Object(I.a)(a)),Object(J.a)(a,"onDelete",W,Object(I.a)(a)),Object(J.a)(a,"getAll",M,Object(I.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){F.isLoginSuccess=!1,H.isRegistrateSuccess=!1,this.getAll()}},{key:"render",value:function(){var e=this;return console.log(this.props),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7 mx-auto text-right"},o.a.createElement("h1",null," TodosList ")),o.a.createElement("div",{className:"col-md-5 mx-auto text-right"},o.a.createElement(p.b,{to:"/"},o.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(t){t.preventDefault(),e.onLogout(e.props)}},"Logout")))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-9 mx-auto"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control",ref:function(t){return e.inputNode=t},onChange:this.onChange,value:V.task,style:{marginBottom:5}}),V.editDisabled?o.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(t){t.preventDefault(),e.onUpdate()}},"Update todo"):o.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(t){t.preventDefault(),e.onSubmit()}},"Add todo")))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-9 mx-auto"},o.a.createElement("table",{className:"table"},o.a.createElement("tbody",null,V.todos.map(function(t,a){return o.a.createElement("tr",{key:a},o.a.createElement("td",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-9"},o.a.createElement("input",{type:"checkbox",onChange:function(a){a.preventDefault(),e.onCompleted(t)},checked:t.completed}),t.completed?o.a.createElement("s",null,t.task):t.task),o.a.createElement("div",{className:"col-md"},o.a.createElement("button",{className:"btn btn-outline-info",onClick:function(a){a.preventDefault(),e.onEdit(t)}},"edit"),o.a.createElement("button",{className:"btn btn-danger",onClick:function(a){a.preventDefault(),e.onDelete(t.id)}},"delete")))))}))))))}}]),t}(n.Component),A=Object(d.a)(D.prototype,"onSubmit",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;t=V.task,q.a.post("/api/todos/".concat(v.user_id),{task:t,user_id:v.user_id},{headers:v.headers}),V.task="",e.getAll()}}}),T=Object(d.a)(D.prototype,"onChange",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){V.task=e.inputNode.value}}}),z=Object(d.a)(D.prototype,"onCompleted",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a,n;a=!t.completed,n=t.id,q.a.put("/api/todos/".concat(v.user_id,"/").concat(n),{completed:a},{headers:v.headers}),e.getAll(),console.log(t.completed)}}}),S=Object(d.a)(D.prototype,"onUpdate",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,a;t=V.task,a=V.id,q.a.put("/api/todos/".concat(v.user_id,"/").concat(a),{task:t},{headers:v.headers}),V.task="",V.id="",V.editDisabled=!1,e.getAll()}}}),R=Object(d.a)(D.prototype,"onEdit",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){V.task=e.task,V.id=e.id,V.editDisabled=!0}}}),U=Object(d.a)(D.prototype,"onLogout",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){E.a.remove("user"),v.user={},e.history.push("/")}}}),W=Object(d.a)(D.prototype,"onDelete",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;a=t,q.a.delete("/api/todos/".concat(v.user_id,"/").concat(a),{headers:v.headers}).catch(function(e){return console.log(e)}).then(function(e){return console.log(e)}),e.getAll()}}}),Object(d.a)(D.prototype,"componentWillMount",[g.d],Object.getOwnPropertyDescriptor(D.prototype,"componentWillMount"),D.prototype),M=Object(d.a)(D.prototype,"getAll",[g.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){q.a.get("/api/todos/".concat(v.user_id),{headers:v.headers}).then(function(e){V.task="",V.todos=Object(Q.a)(e.data).reverse()})}}}),x=D))||x,Y=Object(h.a)((B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).getUser=function(){try{E.a.get("user")&&(v.user=Object.assign({},E.a.get("user")))}catch(e){console.log(e)}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.getUser()}},{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement(b.b,{exact:!0,path:"",component:j}),o.a.createElement(b.b,{exact:!0,path:"/login",component:G}),o.a.createElement(b.b,{exact:!0,path:"/register",component:K}),v.isLogin?o.a.createElement(b.b,{exact:!0,path:v.pathToTodos,component:X}):"")}}]),t}(o.a.Component),Object(d.a)(B.prototype,"componentWillMount",[g.d],Object.getOwnPropertyDescriptor(B.prototype,"componentWillMount"),B.prototype),P=B))||P;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.8420e96c.chunk.js.map